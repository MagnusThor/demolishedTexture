<html>

<head>
    <title>demolishedTexture examples</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
</head>

<body>
    <a href="https://github.com/MagnusThor/demolishedTexture">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
            alt="Fork me on GitHub">
    </a>
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <div class="hero">
                    <h1 class="page-header">demolishedTexture - Examples</h1>
                    <p>
                        Below you find two textures generated by demolishedTexture.
                    </p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <h2>Kaliset</h2>
                <p>
                    kaliset texture
                </p>
                <pre>
                            (pixel, x, y, w, h)  =>  {
                                var t = this,m = Math;
                                var kaliset = function(p){
                                    var es=0, l=es;
                                    for(var i = 0;i < 13;i++) {
                                         var pl = l;
                                         l = t.length(p);
                                         var dot = t.dot(p,p);
                                         p[0] = m.abs(p[0]) / dot -.5; 
                                         p[1] = m.abs(p[1]) / dot -.5; 
                                         p[2] = m.abs(p[2]) / dot -.5;                   
                                         es +=  m.exp(-1/ m.abs(l-pl));  
                                    }  
                                    return es;
                                }
                                var k = kaliset([t.toScale(x),t.toScale(y),0]) *.18;              
                                return [Math.abs((k*1.1)*255),Math.abs((k*k*1.3)*255),Math.abs((k*k*k)*255)];  
                            }
                        </pre>
                <div class="thumbnail text-center">
                    <image id="kaliset"></image>
                </div>

            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <h2>
                    Perlin noise texture
                </h2>
                <p>
                    Using built in Perlin noise generation
                </p>
                <pre>
                            (pixel, x, y, w, h) => {
                                x /= w; y /= h;
                                s = 10; n = this.noise(s * x, s * y, .8);
                                r = g = b = Math.round(255 * n);

                                return [r, g, b]; // always return array of r,g,b      
                            }
                        </pre>
                <div class="thumbnail text-center">
                    <image id="noise" class="pull-center"></image>
                </div>
            </div>
        </div>



        <!-- just for demo page -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>


        <script src="../src/demolishedTexture.js"></script>
        <script>
            let gen;
            document.addEventListener("DOMContentLoaded", () => {
                var kaliset = DemolishedTextureGen.createTexture(512, 512, function (pixel, x, y, w, h) {
                    var t = this, m = Math;
                    var kaliset = function (p) {
                        var es = 0, l = es;
                        for (var i = 0; i < 13; i++) {
                            var pl = l;
                            l = t.length(p);
                            var dot = t.dot(p, p);
                            p[0] = m.abs(p[0]) / dot - .5;
                            p[1] = m.abs(p[1]) / dot - .5;
                            p[2] = m.abs(p[2]) / dot - .5;
                            es += m.exp(-1 / m.abs(l - pl));
                        }
                        return es;
                    }
                    var k = kaliset([t.toScale(x, w), t.toScale(y, w), 0]) * .18;
                    return [Math.abs((k * 1.1) * 255), Math.abs((k * k * 1.3) * 255), Math.abs((k * k * k) * 255)];
                });
                document.querySelector("#kaliset").setAttribute("src", kaliset);


                var noise = DemolishedTextureGen.createTexture(512, 512, function (pixel, x, y, w, h) {

                    x /= w; y /= h;
                    s = 10; n = this.noise(s * x, s * y, .8);
                    r = g = b = Math.round(255 * n);

                    return [r, g, b]

                });

                document.querySelector("#noise").setAttribute("src", noise);




            });
        </script>
</body>

</html>